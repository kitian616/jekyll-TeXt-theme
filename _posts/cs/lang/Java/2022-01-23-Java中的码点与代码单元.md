---
tags: Java
categories:
  - cs
  - lang
  - java
---

```java
/**
 * ç ç‚¹ä¸ä»£ç å•å…ƒ
 *
 * @author holon
 * @date 2022/01/21 2:07 PM
 */
public class CodePoint {
    public static void main(String[] args) {
        /*
        Java å­—ç¬¦ä¸²ç”± char å€¼åºåˆ—ç»„æˆã€‚
        charæ•°æ®ç±»å‹æ˜¯ä¸€ä¸ªé‡‡ç”¨ UTF-16 ç¼–ç è¡¨ç¤º Unicode ç ç‚¹çš„ä»£ç å•å…ƒã€‚
        æœ€å¸¸ç”¨çš„ Unicode å­—ç¬¦ä½¿ç”¨ä¸€ä¸ªä»£ç å•å…ƒå°±å¯ä»¥è¡¨ç¤ºï¼Œè€Œè¾…åŠ©å­—ç¬¦ï¼ˆå¦‚ Emoji è¡¨æƒ…ï¼‰éœ€è¦ä¸€å¯¹ä»£ç å•å…ƒè¡¨ç¤ºã€‚
         */
        String greeting = "Hello";
        String emoji = "ğŸ˜†";
        /*
        length() æ–¹æ³•å°†è¿”å›é‡‡ç”¨ UTF-16 ç¼–ç è¡¨ç¤ºç»™å®šå­—ç¬¦ä¸²æ‰€éœ€è¦çš„ä»£ç å•å…ƒæ•°é‡ã€‚ä¾‹å¦‚ä¸‹é¢ n = 5
         */
        int n = greeting.length();
        // n = 5
        System.out.println("n = " + n);
        // emoji.length = 2
        System.out.println("emoji.length() = " + emoji.length());
        /*
        è¦æƒ³å¾—åˆ°å®é™…çš„é•¿åº¦ï¼Œå³ç ç‚¹æ•°é‡ï¼Œå¯ä»¥è°ƒç”¨ï¼š
         */
        int cpCount = greeting.codePointCount(0, greeting.length());
        // cpCount = 5
        System.out.println("cpCount = " + cpCount);

        /*
        è°ƒç”¨ s.charAt(n) å°†è¿”å›ä½ç½® n çš„ä»£ç å•å…ƒï¼Œ n ä»‹äº 0 ~ s.length()-1 ä¹‹é—´ã€‚ä¾‹å¦‚ï¼š
         */
        // first is 'H'
        char first = greeting.charAt(0);
        System.out.println("first = " + first);
        // last is 'o'
        char last = greeting.charAt(4);
        System.out.println("last = " + last);

        /*
        ç ç‚¹ä¸ä»£ç å•å…ƒçœ‹ä¼¼æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯è€ƒè™‘ä»¥ä¸‹è¯­å¥ï¼š
         */
        String sentence = "ğŸ˜† is an emoji.";
        /*
        ä½¿ç”¨ UTF-16 ç¼–ç è¡¨ç¤ºå­—ç¬¦ğŸ˜†éœ€è¦ä¸¤ä¸ªä»£ç å•å…ƒã€‚
        è°ƒç”¨ sentence.charAt(1) è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œè€Œæ˜¯ ğŸ˜† çš„ç¬¬äºŒä¸ªä»£ç å•å…ƒã€‚
        ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¸è¦ä½¿ç”¨ char ç±»å‹ã€‚
        è¿™å¤ªåº•å±‚äº†ã€‚
         */
        // sentence.charAt(1) is ?
        System.out.println("sentence.charAt(1) = " + sentence.charAt(1));

        /*
        ä¸è¦å¿½ç•¥åŒ…å« U+FFFF ä»¥ä¸Šä»£ç å•å…ƒçš„å¥‡æ€ªå­—ç¬¦ï¼Œå–œæ¬¢ emoji è¡¨æƒ…ç¬¦å·çš„ç”¨æˆ·å¯èƒ½ä¼šåœ¨å­—ç¬¦ä¸²ä¸­åŠ å…¥ç±»ä¼¼ ğŸ¥± çš„å­—ç¬¦ã€‚
         */

        /*
        å¦‚æœæƒ³è¦éå†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¾æ¬¡æŸ¥çœ‹æ¯ä¸€ä¸ªç ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—è¯­å¥ï¼š
         */
        for (int i = 0; i < sentence.length(); ) {
            int cp = sentence.codePointAt(i);
            if (Character.isSupplementaryCodePoint(cp)) {
                i += 2;
            } else {
                i++;
            }
            System.out.print(new String(Character.toChars(cp)));
        }
        System.out.println();

        /*
        ä½¿ç”¨ä¸‹åˆ—è¯­å¥å®ç°åå‘éå†
         */
        for (int i = sentence.length() - 1; i >= 0; i--) {
            if (Character.isSupplementaryCodePoint(sentence.charAt(i))) {
                i--;
            }
            System.out.print(new String(Character.toChars(sentence.codePointAt(i))));
        }
        System.out.println();

        /*
        æ˜¾ç„¶ï¼Œè¿™å¾ˆéº»çƒ¦ã€‚
        æ›´å®¹æ˜“çš„åŠæ³•æ˜¯ä½¿ç”¨ codePoints æ–¹æ³•ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ª int å€¼çš„"æµ"ï¼Œæ¯ä¸ª int å€¼å¯¹åº”ä¸€ä¸ªç ç‚¹ã€‚
        å¯ä»¥å°†å®ƒè½¬æ¢æˆä¸€ä¸ªæ•°ç»„ï¼Œå†å®Œæˆéå†ã€‚
        åä¹‹ï¼Œè¦æŠŠä¸€ä¸ªç ç‚¹æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨æ„é€ å™¨ã€‚
         */
        int[] codePoints = sentence.codePoints().toArray();
        for (int codePoint : codePoints) {
            System.out.print(codePoint + " ");
        }
        System.out.println();
        System.out.println(new String(codePoints, 0, codePoints.length));
    }
}

```